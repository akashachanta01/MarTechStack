<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarTechStack.io</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 py-4 flex justify-between items-center">
            <a href="/" class="text-xl font-extrabold text-slate-900 tracking-tight">
                MarTechStack<span class="text-blue-600">.io</span>
            </a>
            <a href="#" class="text-sm font-semibold text-slate-500 hover:text-slate-900">Post a Job</a>
        </div>
    </nav>

    <div class="max-w-5xl mx-auto px-4 sm:px-6 py-10">
        
        <div class="flex flex-col md:flex-row gap-4 mb-8">
            <div class="relative flex-grow">
                <input type="text" placeholder="Search by job title or skill..." class="w-full pl-4 pr-4 py-3 border border-slate-200 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none">
            </div>
            <div class="relative md:w-1/3">
                 <select class="w-full pl-4 pr-10 py-3 border border-slate-200 rounded-lg shadow-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none appearance-none" onchange="location = this.value;">
                    <option value="/">All Tech Stacks</option>
                    {% for cat in categories %}
                        <option value="/?category={{ cat.slug }}" {% if current_category == cat.slug %}selected{% endif %}>{{ cat.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <button class="bg-green-700 hover:bg-green-800 text-white font-bold py-3 px-8 rounded-lg shadow-sm transition-colors">
                Search
            </button>
        </div>

        <div class="space-y-3">
            {% for job in jobs %}
            <div class="bg-white rounded-xl border border-slate-200 p-5 hover:border-blue-300 hover:shadow-md transition-all duration-200 group relative">
                
                <div class="flex flex-col sm:flex-row gap-5 items-start sm:items-center">
                    
                    <div class="shrink-0">
                        {% if job.company_logo %}
                            <img src="{{ job.company_logo }}" alt="{{ job.company }}" class="w-16 h-16 rounded-full object-contain border border-slate-100 bg-white shadow-sm p-1">
                        {% else %}
                            <div class="w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 font-bold text-xl border border-amber-200">
                                {{ job.company|slice:":1" }}
                            </div>
                        {% endif %}
                    </div>

                    <div class="grow min-w-0 w-full">
                        
                        <div class="flex justify-between items-center mb-1">
                            <h3 class="text-sm font-semibold text-slate-500">{{ job.company }}</h3>
                            <span class="text-xs text-slate-400 font-medium whitespace-nowrap">{{ job.created_at|timesince }} ago</span>
                        </div>
                        
                        <h2 class="text-xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors">
                            <a href="{% url 'job_detail' job.pk %}" class="block">
                                {{ job.title }}
                            </a>
                        </h2>

                        <div class="flex flex-wrap gap-2">
                            {% if job.salary_range %}
                            <span class="inline-flex items-center px-3 py-1 rounded-md text-sm font-bold bg-green-100 text-green-800">
                                {{ job.salary_range }}
                            </span>
                            {% endif %}

                            <span class="inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-amber-100 text-amber-800">
                                {{ job.location }}
                            </span>

                            {% for tool in job.tools.all|slice:":2" %}
                            <span class="hidden sm:inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-slate-100 text-slate-600">
                                {{ tool.name }}
                            </span>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="w-full sm:w-auto mt-2 sm:mt-0 shrink-0">
                        <a href="{{ job.apply_url }}" target="_blank" class="block w-full sm:w-auto text-center bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-sm transform transition hover:-translate-y-0.5">
                            Apply now
                            <div class="text-[10px] font-normal opacity-90 mt-[-2px]">Direct Link</div>
                        </a>
                    </div>

                </div>
            </div>
            {% empty %}
            <div class="text-center py-20 bg-white rounded-xl border border-dashed border-slate-300">
                <p class="text-slate-500 text-lg">No jobs found matching your criteria.</p>
                <a href="/" class="text-blue-600 font-bold hover:underline mt-2 inline-block">Clear Filters</a>
            </div>
            {% endfor %}
        </div>

        <div class="text-center mt-12 text-slate-400 text-sm">
            &copy; 2025 MarTechStack.io - Curated Marketing Operations Jobs
        </div>

    </div>
</body>
</html>
